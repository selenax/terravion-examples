<!DOCTYPE html>
<html>
  <head>
  <meta charset=utf-8 />
  <title>A simple map</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
    <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
  </head>
  <body>

  <div id='map'></div>
  <script>
    /*
      Reference: 
      https://www.mapbox.com/mapbox-gl-js/example/wms/
    */
    mapboxgl.accessToken = 'pk.eyJ1Ijoid21haW91aXJ1IiwiYSI6ImNpajJkN3hwYjAwMGN0dWtwbGV2ZTAzdHAifQ.3Q0TCWrorExd2iTOa-5NfA';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v9',
        center: [-121.877271,38.540580],
        zoom: 15
    });
    var access_token='2e68cee0-b2fd-4ef5-97f6-8e44afb09ffa'
    var user_id='support+demo@terravion.com'
    var epochStart='1456200627'
    var epochEnd='1456632627'
    map.on('load', function() {
      map.addLayer(
        {
          id: 'terravion-layer-key',
          type: 'raster',
          source: {
              type: "raster",
              tiles: [
                  'https://api.terravion.com/v1/users/'+user_id+'/layers/tiles/{z}/{x}/{y}.png?epochStart='+epochStart+'&epochEnd='+epochEnd+'&product=NC&access_token='+access_token
              ],
              scheme: 'tms'
          }
        }
      )
    })
  </script>
  </body>
</html>

